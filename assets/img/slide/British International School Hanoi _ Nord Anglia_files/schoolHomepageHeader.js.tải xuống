(()=>{"use strict";function i(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function t(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.push.apply(e,o)}return e}function e(e){for(var o=1;o<arguments.length;o++){var a=null!=arguments[o]?arguments[o]:{};o%2?t(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))}))}return e}var o,a,n,l,c,s=function(){if(dataLayer&&dataLayer.length)for(var i=0;i<dataLayer.length;i++){var t=dataLayer[i];if("function"!=typeof t)for(var e=Object.keys(t),o=0;o<e.length;o++){if("page_name"==e[o])return t}}},r=function(){$("body").addClass("nae-loading__noScroll")},h=function(){$("body").removeClass("nae-loading__noScroll")};function d(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.push.apply(e,o)}return e}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){i(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))}))}return t}o=".school-homepage-header-container",a=".banner-promotion-container",n=144,l="bannerClosed",c={isXPMode:!1,hasBannerPromotion:!1,moduleName:"",moduleTitle:"",doms:null,scrollNum:0,isDesktop:!0,isAddScrollEvent:!1,canScroll:!1,scrollTop:0,isFullVideo:!1,videoScrollHeight:0,videoScrollNum:0,videoTranslateX:0,playScrollNum:0,circleScrollNum:0,circleZoom:100,circleOpacity:1,shadowOpacity:1,triangleOpacity:.9,titleOpacity:1,videoScrollHeightRange:{min:0,max:0},videoScrollRange:{min:0,max:0},videoTranslateXRange:{min:0,max:0},playScrollRange:{min:0,max:0},circleScrollRange:{min:0,max:0},circleZoomRange:{min:100,max:130},opacityRange:{min:0,max:1},triangleOpacityRange:{min:0,max:.9},hideNaviScrollMax:0,videoSrc:{},install:function(){window.SchoolHomepageHeaderInstalled||(this.getCurPageMode(),this.cacheDoms(),this.isExistBannerPromotion(),this.closeBannerPromotion(),this.judgeSize(),this.initVideo(),this.getModuleNameAndTitle(),this.setScrollCircleAndPlay(),this.frozenNavi(this.scrollNum),this.toggleVideoStatus(),this.bindScrollEvent(),this.watchTheWindowWidth(),this.isMenuOpen(),window.SchoolHomepageHeaderInstalled=!0)},cacheDoms:function(){this.doms={$wrapper:$(o),$videoWrap:$("".concat(o," .preview-video-wrapper")),$video:$("".concat(o," .preview-video")),$playBtn:$("".concat(o," .preview-pause-btn")),$scrollCircle:$("".concat(o," .scroll-arrow-wrapper")),$scrollCircleInner:$("".concat(o," .scroll-arrow-inner")),$circle:$("".concat(o," .scroll-circle")),$videoPart:$("".concat(o," .homepage-header-video-part")),$titlePart:$("".concat(o," .homepage-header-title-part")),$shadow:$("".concat(o," .preview-video-shadow")),$triangle:$("".concat(o," .school-header-triangle")),$rightRectangle:$("".concat(o," .school-header-right-rectangle")),$bannerPromotion:$(a),$bannerCloseBtn:$("".concat(a," .banner-promotion-close-btn"))}},getCurPageMode:function(){this.isXPMode=$("html").hasClass("mode-experience-editor")},initVideo:function(){var i,t=this.doms,e=t.$videoWrap,o=t.$video;i=this.isDesktop?e.data("desktop-full")||e.data("mobile-full"):e.data("mobile-full")||e.data("desktop-full"),this.videoSrc={full:i},o.attr("src",this.videoSrc.full)},isExistBannerPromotion:function(){var i=this.doms.$bannerPromotion;if(this.hasBannerPromotion=!!i.length,this.hasBannerPromotion){if(window.sessionStorage.getItem(l))return i[0].remove(),void(this.hasBannerPromotion=!1);i.removeClass("hide"),r(),this.removeScrollWatch()}},closeBannerPromotion:function(){var i=this;if(this.hasBannerPromotion){var t=this.doms,e=t.$bannerCloseBtn,o=t.$bannerPromotion;e.on("click",(function(){o[0].remove(),i.hasBannerPromotion=!1,window.sessionStorage.setItem(l,!0),h(),i.bindScrollEvent()}))}},isMenuOpen:function(){var i=this,t=$(".homepage-navigation-container .menu-btn"),e=$(".homepage-navigation-container .homepage-navigation"),o=$(".homepage-navigation-container .homepage-navigation-for-school");t.on("click",(function(){i.isDesktop&&setTimeout((function(){var t=e.hasClass("menu-open"),a=o.hasClass("menu-open");t||a?(i.removeScrollWatch(),i.isAddScrollEvent=!1):i.canScroll||i.isXPMode||i.hasBannerPromotion||i.addScrollWatch()}),0)}))},judgeSize:function(){this.isDesktop=window.innerWidth>=992,this.scrollNum=$(document).scrollTop(),this.isDesktop&&0==this.scrollNum?this.canScroll=!1:this.canScroll=!0},watchTheWindowWidth:function(){var i=this;$(window).resize((function(){i.isDesktop=window.innerWidth>=992,i.setScrollCircleAndPlay(),i.bindScrollEvent()}))},frozenNavi:function(i){var t=$(".homepage-navigation-container");this.isDesktop&&i<=this.hideNaviScrollMax?t.addClass("stop-navigation-scroll"):t.removeClass("stop-navigation-scroll")},releaseNavi:function(){$(".homepage-navigation-container").removeClass("stop-navigation-scroll")},getModuleNameAndTitle:function(){var i=p({},this.doms).$wrapper;this.moduleName=i.data("module-name")||"";var t=i.find(".homepage-header-title");t&&t.length&&(this.moduleTitle=t.text()||"")},setScrollCircleAndPlay:function(){var i=p({},this.doms),t=i.$scrollCircle,e=i.$playBtn,o=i.$rightRectangle,a=p({},this._computedStyleForCircleAndPlay()),n=a.circleCss,l=a.btnCss,c=a.rightRectangleCss;t.css(n),e.css(l),o&&o.length&&o.css(c)},_computedStyleForCircleAndPlay:function(){var i=p({},this.doms),t=i.$videoWrap,e=i.$videoPart,o=0,a=0,l=0,c={},s={},r={},h=window.innerHeight;return this.isDesktop?(o=t.offset().top,a=parseFloat(e.css("padding-top")),l=h-o,this.scrollTop=o,c=l<=n+a-20?{top:"".concat(20+a,"px")}:{top:"".concat(l-n+a+20,"px")},s=l<=80?{top:"".concat(24,"px")}:{top:"".concat(l-32-24,"px")},this.playScrollNum=parseFloat(s.top),this.playScrollRange={min:parseFloat(s.top),max:parseFloat(s.top)+32+48},this.circleScrollRange={min:31,max:82},this.circleScrollNum=31,this.hideNaviScrollMax=o+e.height()-244,this.videoScrollRange={min:e.width(),max:$(document).width()},this.videoScrollHeightRange={min:e.height(),max:e.height()+34},this.isFullVideo?(this.videoScrollNum=$(document).width(),this.videoScrollHeight=e.height()+34):(this.videoScrollNum=e.width(),this.videoScrollHeight=e.height()),t.css({width:"".concat(this.videoScrollNum,"px"),height:"".concat(this.videoScrollHeight,"px"),transition:"initial"}),r={bottom:"".concat(o,"px")}):(c={top:""},s={top:""},t.css({width:"",height:"",transition:""}),r={bottom:""}),{circleCss:c,btnCss:s,rightRectangleCss:r}},toggleVideoStatus:function(){var i=p({},this.doms).$playBtn,t=this;i.on("click",(function(){var i,o=$(this),a=o.parent().find(".preview-video"),n=t.videoSrc.full,l={event:"video",event_category:null===(i=s())||void 0===i?void 0:i.page_name,event_label:"".concat(n)};o.hasClass("is-playing")?(o.removeClass("is-playing").addClass("is-pausing"),a[0].pause(),l.event_action="video_pause:".concat(t.moduleName).concat(t.moduleTitle?"|".concat(t.moduleTitle):"")):o.hasClass("is-pausing")&&(o.removeClass("is-pausing").addClass("is-playing"),a[0].play(),l.event_action="video_play:".concat(t.moduleName).concat(t.moduleTitle?"|".concat(t.moduleTitle):"")),function(i){var t=i.$doms,o=i.data,a=void 0===o?null:o;a&&Object.keys(a).length?dataLayer.push(e(e({},a),{},{site_build:"rome"})):(t&&t.length?t:$(".only-for-datalayer-tracking")).on("click",(function(){var i=$(this);if(!i.hasClass("swiper-button-disabled")){var t=e({},i.data("datalayer"));if(i.hasClass("swiper-custom-prev")||i.hasClass("swiper-custom-next")){var o=i.attr("aria-controls"),a=$("#".concat(o)),n=a.parent(),l=[];if(n.hasClass("js-6-4-container")){var c=n.parent().find(".js-6-4-pagination"),s=+c.html().slice(-2),r=+c.html().slice(0,2);i.hasClass("swiper-custom-prev")?--r<1&&(r=s):i.hasClass("swiper-custom-next")&&++r>s&&(r=1);var h=(l=[r]).join();t.event_label+="|".concat(h),dataLayer.push(e(e({},t),{},{site_build:"rome"}))}else setTimeout((function(){for(var i=a.find(".swiper-slide-active"),o=0;o<i.length;o++)l.push(+$(i[o]).attr("aria-label").split("/")[0]);var n=l.join();t.event_label+="|".concat(n),dataLayer.push(e(e({},t),{},{site_build:"rome"}))}),0)}else dataLayer.push(e(e({},t),{},{site_build:"rome"}))}}))}({data:l})}))},bindScrollEvent:function(){!this.hasBannerPromotion&&this.isDesktop&&this.addScrollWatch(),this.isDesktop||this.removeScrollWatch()},addScrollWatch:function(){this.isAddScrollEvent||(this.isAddScrollEvent=!0,window.addEventListener("DOMMouseScroll",this.scrollHandler,!1),window.addEventListener("wheel",this.scrollHandler,{passive:!1}),window.addEventListener("mousewheel",this.scrollHandler,{passive:!1}),window.addEventListener("touchmove",this.scrollHandler,{passive:!1}),document.addEventListener("scroll",this.dealWithCanScroll,{passive:!1}),this.isXPMode||window.addEventListener("keydown",this.scrollHandler,!1))},removeScrollWatch:function(){window.removeEventListener("DOMMouseScroll",this.scrollHandler),window.removeEventListener("wheel",this.scrollHandler),window.removeEventListener("mousewheel",this.scrollHandler),window.removeEventListener("touchmove",this.scrollHandler),window.removeEventListener("keydown",this.scrollHandler)},dealWithCanScroll:function(){var i=c,t=$(document).scrollTop();!i.canScroll&&i.isDesktop&&(i.canScroll=t>=118),i.canScroll&&i.isDesktop&&0===t&&(i.canScroll=!1,i.addScrollWatch()),t<=i.hideNaviScrollMax?i.frozenNavi(t):i.releaseNavi()},scrollHandler:function(i){var t=c;if(!t.isNavigationOpen()&&!t.isCookieBanerShow()){var e=$(document).scrollTop();!t.canScroll&&t.isDesktop&&(i.preventDefault(),i.stopPropagation(),i.keyCode||t.dealWithScrollAnimation(i.deltaY)),t.canScroll&&t.isDesktop&&i.deltaY<0&&0===e&&(i.keyCode||t.dealWithScrollAnimation(i.deltaY))}},dealWithScrollAnimation:function(i){var t=p({},this.doms),e=t.$videoWrap,o=t.$playBtn,a=t.$scrollCircleInner,n=t.$circle,l=t.$titlePart,c=t.$shadow,s=t.$triangle;if(this.isDesktop){var r=Math.round(2*i),h=.02*i,d=.02*i,m=.018*i,g=.018*i,u=Math.round(1*i),v=Math.round(.3*i);i<0&&(this.isFullVideo=!1),this.playScrollNum+=r,this.circleZoom+=r,this.circleOpacity-=h,this.circleScrollNum+=r,this.titleOpacity-=d,this.shadowOpacity-=m,this.triangleOpacity-=g,this.videoScrollNum+=u,this.videoScrollHeight+=v,this.canScroll=!1,this.playScrollNum<=this.playScrollRange.min&&(this.playScrollNum=this.playScrollRange.min),this.playScrollNum>=this.playScrollRange.max&&(this.playScrollNum=this.playScrollRange.max),this.circleOpacity<=this.opacityRange.min&&(this.circleOpacity=this.opacityRange.min),this.circleOpacity>=this.opacityRange.max&&(this.circleOpacity=this.opacityRange.max),this.circleZoom<=this.circleZoomRange.min&&(this.circleZoom=this.circleZoomRange.min),this.circleZoom>=this.circleZoomRange.max&&(this.circleZoom=this.circleZoomRange.max),this.circleScrollNum<=this.circleScrollRange.min&&(this.circleScrollNum=this.circleScrollRange.min),this.circleScrollNum>=this.circleScrollRange.max&&(this.circleScrollNum=this.circleScrollRange.max),this.titleOpacity<=this.opacityRange.min&&(this.titleOpacity=this.opacityRange.min),this.titleOpacity>=this.opacityRange.max&&(this.titleOpacity=this.opacityRange.max),this.shadowOpacity<=this.opacityRange.min&&(this.shadowOpacity=this.opacityRange.min),this.shadowOpacity>=this.opacityRange.max&&(this.shadowOpacity=this.opacityRange.max),s.length&&this.triangleOpacity<=this.triangleOpacityRange.min&&(this.triangleOpacity=this.triangleOpacityRange.min),s.length&&this.triangleOpacity>=this.triangleOpacityRange.max&&(this.triangleOpacity=this.triangleOpacityRange.max),this.videoScrollNum<=this.videoScrollRange.min&&(this.videoScrollNum=this.videoScrollRange.min),this.videoScrollNum>=this.videoScrollRange.max&&(this.videoScrollNum=this.videoScrollRange.max,this.canScroll=!0,this.isFullVideo=!0),this.videoScrollHeight<=this.videoScrollHeightRange.min&&(this.videoScrollHeight=this.videoScrollHeightRange.min),this.videoScrollHeight>=this.videoScrollHeightRange.max&&(this.videoScrollHeight=this.videoScrollHeightRange.max),o.css({top:"".concat(this.playScrollNum,"px"),opacity:this.circleOpacity}),n.css({width:"".concat(this.circleZoom,"%"),height:"".concat(this.circleZoom,"%"),opacity:this.circleOpacity}),a.css({top:"".concat(this.circleScrollNum,"px"),opacity:this.circleOpacity}),l.css({opacity:this.titleOpacity}),c.css({opacity:this.shadowOpacity}),e.css({width:"".concat(this.videoScrollNum,"px"),height:"".concat(this.videoScrollHeight,"px"),transition:"all 0.1s"}),s.length&&s.css({opacity:this.triangleOpacity})}else o.css({top:"",opacity:""}),n.css({width:"",height:"",opacity:""}),a.css({top:"",opacity:""}),l.css({opacity:""}),c.css({opacity:""}),e.css({width:"",height:"",transition:""}),s.length&&s.css({opacity:""})},isNavigationOpen:function(){return!!document.querySelector(".homepage-navigation.menu-open")},isCookieBanerShow:function(){var i=$(".cookies-banner"),t=i.css("display");return!(!i||!i.length||"none"===t)}},$((function(){c.install()}))})();