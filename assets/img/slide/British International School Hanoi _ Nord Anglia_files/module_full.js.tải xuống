(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=function(e){var t=e.$doms,n=e.data,o=void 0===n?null:n;if(o&&Object.keys(o).length)dataLayer.push(r(r({},o),{},{site_build:"rome"}));else{(t&&t.length?t:$(".only-for-datalayer-tracking")).on("click",(function(){var e=$(this);if(!e.hasClass("swiper-button-disabled")){var t=r({},e.data("datalayer"));if(e.hasClass("swiper-custom-prev")||e.hasClass("swiper-custom-next")){var n=e.attr("aria-controls"),o=$("#".concat(n)),a=o.parent(),i=[];if(a.hasClass("js-6-4-container")){var l=a.parent().find(".js-6-4-pagination"),c=+l.html().slice(-2),s=+l.html().slice(0,2);e.hasClass("swiper-custom-prev")?--s<1&&(s=c):e.hasClass("swiper-custom-next")&&++s>c&&(s=1);var d=(i=[s]).join();t.event_label+="|".concat(d),dataLayer.push(r(r({},t),{},{site_build:"rome"}))}else setTimeout((function(){for(var e=o.find(".swiper-slide-active"),n=0;n<e.length;n++)i.push(+$(e[n]).attr("aria-label").split("/")[0]);var a=i.join();t.event_label+="|".concat(a),dataLayer.push(r(r({},t),{},{site_build:"rome"}))}),0)}else dataLayer.push(r(r({},t),{},{site_build:"rome"}))}}))}},l=function(){if(dataLayer&&dataLayer.length)for(var e=0;e<dataLayer.length;e++){var t=dataLayer[e];if("function"!=typeof t)for(var n=Object.keys(t),o=0;o<n.length;o++){if("page_name"==n[o])return t}}};var c,s,d,v,u,y,m,f,p,b,h,_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootElem=void 0,this.src="",this.dataLayer=void 0,this.extraParams={},this.elems={},this.aboutToClose=!1}var o,a,r;return o=e,r=[{key:"create",value:function(t,n,o){var a=new e;return a.src=t,n&&(a.dataLayer=n),o&&(a.extraParams=o),a}}],(a=[{key:"template",value:function(){return"\n            <div class='video-overlay'>\n                <button class='close-overlay-btn' type='button'>\n                    <div class='close-overlay-btn-icon'></div>\n                </button>\n\n                <div class='overlay-video-wrapper'>\n                    <video class='overlay-video' controls playsinline>\n                        <source src='".concat(this.src,"'>\n                        <div class='preview-video-alt'>Your video doesn't support video</div>\n                    </video>\n                </div>\n            </div>\n        ")}},{key:"moduleName",value:function(){return this.extraParams.moduleName||""}},{key:"moduleTitle",value:function(){return this.extraParams.moduleTitle||""}},{key:"moduleNameAndTitle",value:function(){var e=this.moduleName(),t=this.moduleTitle();return""!==t&&(e+="|".concat(t)),e}},{key:"init",value:function(){var e,t,n=this;this.rootElem=(e=this.template(),(t=document.createElement("div")).innerHTML=e,t.querySelector("*"));var o=this.rootElem,a=this.elems;a.closeOverlayBtn=o.querySelector(".close-overlay-btn"),a.overlayVideo=o.querySelector(".overlay-video"),a.closeOverlayBtn.addEventListener("click",(function(){var e;n.aboutToClose=!0,n.dataLayer&&i({data:{event:"video",event_category:(null===(e=l())||void 0===e?void 0:e.page_name)||"",event_action:"video_close: ".concat(n.moduleNameAndTitle()),event_label:n.src}}),n.close()})),a.overlayVideo.addEventListener("play",(function(){var e;i({data:{event:"video",event_category:(null===(e=l())||void 0===e?void 0:e.page_name)||"",event_action:"video_play: ".concat(n.moduleNameAndTitle()),event_label:n.src}})})),a.overlayVideo.addEventListener("pause",(function(){var e,t;n.aboutToClose?n.aboutToClose=!1:a.overlayVideo.ended?i({data:{event:"video",event_category:(null===(e=l())||void 0===e?void 0:e.page_name)||"",event_action:"video_complete: ".concat(n.moduleNameAndTitle()),event_label:n.src}}):i({data:{event:"video",event_category:(null===(t=l())||void 0===t?void 0:t.page_name)||"",event_action:"video_pause: ".concat(n.moduleNameAndTitle()),event_label:n.src}})}))}},{key:"open",value:function(){t(document.body.children).includes(this.rootElem)||(this.init(),document.body.appendChild(this.rootElem),this.elems.overlayVideo.play(),this.setBodyScrollable(!1))}},{key:"close",value:function(){t(document.body.children).includes(this.rootElem)&&(document.body.removeChild(this.rootElem),this.rootElem=void 0,this.elems={},this.setBodyScrollable(!0))}},{key:"setBodyScrollable",value:function(e){e?(document.body.style.overflowY="",document.body.style.touchAction=""):(document.body.style.overflowY="hidden",document.body.style.touchAction="none")}}])&&n(o.prototype,a),r&&n(o,r),e}();c=$(".full-video__resource"),s=$(".full-video__resource").find("video"),d=$(".js-video-control"),v=$(".js-video-play"),u=$(".js-video-pause"),y=$(".js-play-btn"),m=$(".js-show-iframe"),f=!0,p=!0,b={},h=function(){(b=function(e,t){if(!$(e).length)return{hasSrc:!1};var n,o,a=$(e).data(),r=a.desktopPreview,i=a.desktopFull,l=a.mobilePreview,c=a.mobileFull;return t?(n=r||l||i||c,o=i||c||r||l):(n=l||r||c||i,o=c||i||l||r),{preview:n,full:o,hasSrc:!!n}}(c,f)).hasSrc&&s.attr("src")!==b.preview&&(s.attr("src",b.preview),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;e&&e.addEventListener("timeupdate",(function(){e.currentTime>t&&(e.currentTime=0)}))}(s[0]))},$((function(){f=window.innerWidth>=992,p=f,$(window).resize((function(){(f=window.innerWidth>=992)!==p&&(h(),v.addClass("d-none"),u.removeClass("d-none"),p=f)})),h(),y.on("click",(function(e){var t;if(b.hasSrc){var n=$(".full-video").data("module-name"),o=$(".full-video__text-title").text(),a={event:"video",event_category:(null===(t=l())||void 0===t?void 0:t.page_name)||"",event_action:"video_click: ".concat(n," | ").concat(o),event_label:"".concat(b.full)},r={moduleName:n,moduleTitle:o};_.create(b.full,a,r).open()}})),d.on("click",(function(){var e,t;v.hasClass("d-none")?(v.removeClass("d-none"),u.addClass("d-none"),s.trigger("pause"),t="video_pause"):(v.addClass("d-none"),u.removeClass("d-none"),s.trigger("play"),t="video_play"),i({data:{event:"video",event_category:null===(e=l())||void 0===e?void 0:e.page_name,event_action:t,event_label:"".concat(s.attr("src")),event_position:"center"}})})),m.on("click",(function(){var e=$(this).attr("data-src");$("body").append('\n                <div class="video-overlay">\n                    <button class="close-overlay-btn" type="button">\n                        <div class="close-overlay-btn-icon"></div>\n                    </button>\n                    <div class="overlay-video-wrapper">\n                        <iframe id="virtualTourIframe"\n                            title=""\n                            width="100%"\n                            height="100%"\n                            src="'.concat(e,'">\n                        </iframe>\n                    </div>\n                </div>\n            ')),$(".close-overlay-btn").on("click",(function(){$(".video-overlay").remove()}))}))}))})();